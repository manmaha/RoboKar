<!DOCTYPE html>
<html>
<body>

<h1>RoboKar Browser Control</h1>
<h2>Linear & Angular Velocity</h2>
<p>Drag the sliders to Send</p>

<div id="slidecontainer">
  <p>Linear Velocity: <span id="v_value"></span></p>
  <input type="range" min="-30.00" max="30.00" value="0.00" step ="0.01" id="linear" name="linear">
  <p>Angular Velocity: <span id="w_value"></span></p>
  <input type="range" min="-5.0" max="5.0" value="0.00" step ="0.1" id="angular" name="angular">
</div>
  <p></p>
  <p></p>
  <input type="button" value='STOP ROBOT' id="stop_button">
  <p></p>
  <p></p>
  <input type="button" value='EXIT ROBOT' id="exit_button">

<script>

var v = document.getElementById("linear");
var w = document.getElementById("angular");
var v_output = document.getElementById("v_value");
var w_output = document.getElementById("w_value");
var stop_button = document.getElementById("stop_button");
v_output.innerHTML = v.value;
w_output.innerHTML = w.value;


v.oninput = function() {
  v_output.innerHTML = v.value;
  var xhttp = new XMLHttpRequest();

  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
    }
  };

  var url = "http://manishpi5.local:5000/read_vel?linear="+v.value+"&angular="+w.value;
  xhttp.open("GET", url, true);
  xhttp.send();
};
w.oninput = function() {
  w_output.innerHTML = w.value;
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
    }
  };

  var url = "http://manishpi5.local:5000/read_vel?linear="+v.value+"&angular="+w.value;
  xhttp.open("GET", url, true);
  xhttp.send();
};

stop_button.onclick = function() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
    }
  };

  var url = "http://manishpi5.local:5000/stop";
  xhttp.open("GET", url, true);
  xhttp.send();
  location.href = url;
};

exit_button.onclick = function() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
    }
  };

  var url = "http://manishpi5.local:5000/exit";
  xhttp.open("GET", url, true);
  xhttp.send();
  location.href = url;
};
</script>

</body>
</html>
